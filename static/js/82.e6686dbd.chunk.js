"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[82],{8958:function(e,t,n){n.d(t,{HJ:function(){return u},Jf:function(){return l},PE:function(){return d},SP:function(){return s},xS:function(){return p}});var r=n(4942),o=n(885),a=n(1413),i=function(e,t,n){if(0===n&&!t.includes("="))return(0,a.Z)((0,a.Z)({},e),{},{shortId:parseInt(t,10),shortValue:t});var i=decodeURIComponent(t).split("="),s=(0,o.Z)(i,2),c=s[0],u=s[1];return c?(0,a.Z)((0,a.Z)({},e),{},(0,r.Z)({},c,u)):e},s=window.location.search.replace("?","").split("&").reduce(i,{}),c=window.location.hash,u=function(){return c.replace("#","").split("&").reduce(i,{})},l=parseInt(s.vk_app_id,10),p=parseInt(s.vk_user_id,10);s.vk_platform;function d(){var e=u();return Object.keys(e).filter((function(e){return e.includes("utm_")})).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}},2229:function(e,t,n){n.d(t,{f:function(){return o}});var r=n(4928),o=r.V5.model({visible:r.V5.optional(r.V5.boolean,!1),message:r.V5.optional(r.V5.string,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435"),header:r.V5.optional(r.V5.string,"")}).actions((function(e){return{show:function(t,n){e.visible=!0,e.message=t,e.header=n},hide:function(){e.visible=!1}}})).create()},6082:function(e,t,n){n.r(t),n.d(t,{App:function(){return je}});var r=n(7276),o=n(1108),a=n(6210),i=(n(429),n(3168)),s=n(9905),c=n(1413),u=n(885),l=n(4942),p=n(8958),d=n(9989),f=n(5861),g=n(4687),v=n.n(g),h=n(1995),m=n.n(h),w=n(4928),x=w.V5.model({messages:w.V5.optional(w.V5.array(w.V5.string),["init value"]),isTabAvailable:w.V5.optional(w.V5.boolean,"1"===(0,p.HJ)().debug)}).actions((function(e){return{log:function(t){e.messages.push(t)}}})).create(),y=n(2229),b=(0,d.i)().backUrl,V=m().create({baseURL:"".concat(b||"","/"),timeout:5e4,headers:{queryparams:JSON.stringify((0,c.Z)({},p.SP))}});V.interceptors.request.use((function(e){return x.log(JSON.stringify(e)),e})),V.interceptors.response.use((function(e){return e.data}),(function(e){return("ECONNABORTED"===e.code||e.response&&502===e.response.status)&&console.info("failed load"),"/anl"!==e.config.url&&422!==e.response.status&&y.f.show(),Promise.reject(e)}));var j=[],k=function(e,t,n){var r,o,a,i,s;function c(){var u=Date.now()-i;u<t&&u>=0?r=setTimeout(c,t-u):(r=null,n||(s=e.apply(a,o),a=o=null))}null==t&&(t=100);var u=function(){a=this,o=arguments,i=Date.now();var u=n&&!r;return r||(r=setTimeout(c,t)),u&&(s=e.apply(a,o),a=o=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=e.apply(a,o),a=o=null,clearTimeout(r),r=null)},u}((function(){j=[]}),500);function S(){return(S=(0,f.Z)(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.push(t),k();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=n(5054),P=(0,d.i)(),_=P.metrikaId,I=P.gaId,T=(0,p.PE)();I&&((0,A.v)("https://www.googletagmanager.com/gtag/js?id="+I,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",I,{client_storage:"none",client_id:p.xS}),window.gtag("set",{user_id:p.xS})),window.ym||(window.ym=function(){}),window.gtag||(window.gtag=function(){}),window.ym(_,"setUserID",p.xS);var N={category:"page",action:"opened",title:"\u041e\u0442\u043a\u0440\u044b\u0442\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"},L={category:"app",action:"started",title:"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043e"};function E(e){try{var t=(0,d.i)(),n=t.saveAnalyticsOnServer,r=t.serverAnalyticsFilter;if(!n)return;if(r)if(!r.some((function(t){return e.includes(t)})))return;(function(e){return S.apply(this,arguments)})(e).catch((function(){}))}catch(o){console.error("cant send event to server",o)}}function C(e){var t=e.category,n=e.action,r=e.label;"page"===t&&"opened"===n?function(e){var t=e.label,n="/page".concat(t);window.gtag("event","page_view",{page_title:n,page_location:n,page_path:n}),E(n),window.ym(_,"hit",t)}({category:t,action:n,label:r}):function(e){var t=e.category,n=e.action,r=e.label,o="/event/".concat(t,"/").concat(n,"?").concat(T);if(window.gtag("event","page_view",{page_title:o,page_location:o,page_path:o}),E(o),window.ym(_,"reachGoal",o),r){var a="/event/".concat(t,"/").concat(n,"/").concat(r,"?").concat(T);window.gtag("event","page_view",{page_title:a,page_location:a,page_path:a}),E(a),window.ym(_,"reachGoal",a)}}({category:t,action:n,label:r})}var Z="/",R="PANEL_HOME",O="VIEW_WELCOME",W="VIEW_HOME",B=[W],D=(0,l.Z)({},Z,new s.Page(R,W)),M=new s.Router(D);M.on("update",(function(e){var t=e.params,n=e.getLocation().replace(/\(.*?\)/g,"");Object.entries(t).forEach((function(e){var t=(0,u.Z)(e,2),r=t[0],o=t[1];n=n.replace(":".concat(r),o)})),C((0,c.Z)((0,c.Z)({},N),{},{label:n}))})),M.on("update",(function(e){console.info("====== router changed ======="),M.history.stack.forEach((function(e,t){var n=e[0],r=n.pageId,o=n.params,a=t===M.history.getCurrentIndex()?"->":"";console.info(a,r,JSON.stringify(o))})),console.info("=======")})),M.start();var K=n(5589),F=n.n(K);var U=window.innerWidth<500,z=(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),window.navigator.userAgent.toLowerCase().includes("iphone")||window.navigator.userAgent.toLowerCase().includes("ios"),/(android)/i.test(navigator.userAgent),w.V5.model({vkUi:w.V5.optional(w.V5.string,""),statusBarStyle:w.V5.optional(w.V5.string,"")}).actions((function(e){return{setVkUi:function(t){e.vkUi=t,e.setBarStyle()},setBarStyle:function(){U&&F().send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#FFF"})}}})).create()),H=n(4041),J=w.V5.model({curPopoutParams:w.V5.maybeNull(w.V5.frozen())}).actions((function(e){return{showSnackBar:function(t){e.curPopoutParams={text:t}},close:function(){e.curPopoutParams=null}}})).create({curPopoutParams:null}),G=n(5263),q=(0,i.Pi)((function(){var e=J.curPopoutParams;return(0,G.jsx)(G.Fragment,{children:e&&(0,G.jsx)(a.A9,{onClose:function(){return J.close()},before:(0,G.jsx)(a.qE,{size:24,style:{background:"var(--accent)"},children:(0,G.jsx)(H.Z,{fill:"#fff",width:14,height:14})}),children:e.text})})})),Q=w.V5.model({actionItems:w.V5.frozen(null)}).actions((function(e){return{show:function(t){e.actionItems={node:t}},hide:function(){e.actionItems=null}}})).create({actionItems:null});var X=function(e){var t=e.id,n=e.onClose;return(0,G.jsx)(a.pU,{id:t,onClose:n,header:"\u042d\u0442\u043e \u043c\u043e\u0434\u0430\u043b\u044c\u043d\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430.",subheader:"\u0417\u0434\u0435\u0441\u044c \u043e\u043d\u0430 \u043d\u0443\u0436\u043d\u0430 \u0434\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u0430\u043a \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0434\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438.",actions:(0,G.jsx)(a.zx,{size:"l",mode:"primary",onClick:n,children:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e"})})},Y=function(){var e=(0,s.useLocation)();return(0,G.jsx)(a.Y0,{activeModal:e.getModalId(),children:(0,G.jsx)(X,{id:"MODAL_DEMO",onClose:function(){return M.replaceModal(null)}})})},$=w.V5.model({active:w.V5.optional(w.V5.boolean,!1)}).actions((function(e){return{show:function(){e.active=!0},hide:function(){e.active=!1}}})).create();function ee(){return te.apply(this,arguments)}function te(){return te=(0,f.Z)(v().mark((function e(){var t,n,r=arguments;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",n=(0,p.PE)(),e.abrupt("return",void"/auth/init?source=".concat(t||"","&").concat(n));case 3:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function ne(){return re.apply(this,arguments)}function re(){return(re=(0,f.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void window.location.href);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return ae.apply(this,arguments)}function ae(){return(ae=(0,f.Z)(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=w.V5.model({user:w.V5.frozen(null),source:w.V5.maybeNull(w.V5.string),catalogTooltipShown:w.V5.optional(w.V5.boolean,!1),shopTooltipShown:w.V5.optional(w.V5.boolean,!1),authorized:w.V5.optional(w.V5.boolean,!1)}).actions((function(e){return{parseUserAnswer:function(t){e.user=t},fetchUser:(0,w.ls)(v().mark((function t(){var n;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(e.source);case 2:n=t.sent,e.parseUserAnswer(n);case 4:case"end":return t.stop()}}),t)}))),acceptRules:(0,w.ls)(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne();case 2:e.user=t.sent;case 3:case"end":return t.stop()}}),t)}))),syncSource:function(){var t=(0,p.HJ)();e.source=t.source},setMeta:function(t){e.catalogTooltipShown=!!t.catalogTooltip,e.shopTooltipShown=!!t.shopTooltip,e.authorized=!!t.authorized},setCatalogTooltipShown:function(t){e.catalogTooltipShown=t},setShopTooltipShown:function(t){e.shopTooltipShown=t},acceptAllTooltips:(0,w.ls)(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.shopTooltipShown){t.next=4;break}return e.setShopTooltipShown(!0),t.next=4,oe({key:"shopTooltip",value:!0});case 4:if(e.catalogTooltipShown){t.next=8;break}return e.setCatalogTooltipShown(!0),t.next=8,oe({key:"catalogTooltip",value:!0});case 8:case"end":return t.stop()}}),t)})))}})).create(),se="___APP_INIT_RESPONSE_START_TIME";function ce(){return window.___APP_INIT_RESPONSE}var ue=null;function le(e,t){var n=!1;return ce()?(e(ce()),clearInterval(ue),n=!0):(window.___APP_INIT_RESPONSE_ERROR||!window[se]||Date.now()>window[se]+3e3)&&(t(),clearInterval(ue),n=!0),n}function pe(){return new Promise((function(e,t){le(e,t)||(ue=setInterval((function(){return le(e,t)}),50))}))}function de(){setTimeout((function(){document.getElementById("preloader")&&(document.getElementById("preloader").style.display="none"),document.getElementById("root").style.opacity="1"}),0)}function fe(){ie.source?C((0,c.Z)((0,c.Z)({},L),{},{label:ie.source})):C(L);var e=(0,p.HJ)();F().send("VKWebAppInit"),F().subscribe((function(e){"VKWebAppViewRestore"===e.detail.type&&(ie.fetchUser(),F().supports("VKWebAppSetViewSettings")&&F().send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#fff"}))})),F().supports("VKWebAppSetViewSettings")&&F().send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#fff"}),e.shortValue,e.shortValue}function ge(){return ve.apply(this,arguments)}function ve(){return(ve=(0,f.Z)(v().mark((function e(){var t;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie.syncSource(),fe(),!(t=ce())){e.next=14;break}if(ie.parseUserAnswer(t.user),ie.setMeta(t.meta),!t.meta.authorized){e.next=10;break}return e.next=10,M.replacePage(Z);case 10:return e.next=12,M.replacePage(Z);case 12:e.next=15;break;case 14:console.error("! init models WITHOUT ready init response");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=(0,f.Z)(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de(),e.next=3,pe().catch((function(){return null}));case 3:return e.next=5,ge();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){he.apply(this,arguments)}(),console.log("foo",(0,p.HJ)());var me=n(1508),we=n(3956),xe=n(3306),ye=(0,i.Pi)((function(){return(0,G.jsx)(xe.C,{})})),be=(0,i.Pi)((function(){var e=(0,s.useLocation)(),t=e.getViewId();console.log({activeView:t});return(0,G.jsx)(a.Sk,{activeStory:t,tabbar:(0,G.jsxs)(a.Er,{children:[(0,G.jsx)(a.QP,{selected:t===W,text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",onClick:function(){return e=Z,void(t===W?window.scrollTo({top:0,behavior:"smooth"}):M.pushPage(e));var e},children:(0,G.jsx)(me.Z,{})}),(0,G.jsx)(a.QP,{selected:"___"===t,onClick:function(){},text:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433",children:(0,G.jsx)(we.Z,{})})]}),children:(0,G.jsx)(a.G7,{id:W,activePanel:e.getViewActivePanel(W),children:(0,G.jsx)(ye,{id:R})})})})),Ve=r.lazy((function(){return Promise.all([n.e(125),n.e(534)]).then(n.bind(n,4534))})),je=function(){var e=(0,G.jsx)(ke,{});return window.location.search.includes("viewTests")&&(e=(0,G.jsx)(r.Suspense,{fallback:(0,G.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),children:(0,G.jsx)(a.G7,{id:"VIEW_TESTS",activePanel:"main",children:(0,G.jsx)(Ve,{id:"main"})})})),e},ke=(0,i.Pi)((function(){console.log("!!! ClientApp");var e=(0,s.useLocation)(),t=e.getViewId(),n=e.getViewActivePanel(W),o=e.state.history,i="PANEL_HOME"===n;return r.useEffect((function(){F().send(i?"VKWebAppEnableSwipeBack":"VKWebAppDisableSwipeBack")}),[i]),B.includes(t)&&(t="VIEW_MAIN"),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(q,{}),(0,G.jsxs)(a.fC,{popout:y.f.visible?(0,G.jsx)(a.bZ,{onClose:function(){return y.f.hide()},actions:[{title:"\u041e\u043a",mode:"cancel",action:function(){return y.f.hide()}}],actionsLayout:"vertical",header:y.f.header||"\u041e\u0448\u0438\u0431\u043a\u0430",text:y.f.message}):Q.actionItems?(0,G.jsx)(a.Vb,{onClose:function(){return Q.hide()},iosCloseItem:(0,G.jsx)(a.QI,{autoclose:!0,mode:"cancel",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),children:Q.actionItems.node}):null,activeView:t,modal:(0,G.jsx)(Y,{}),children:[(0,G.jsx)(a.G7,{history:o,id:O,activePanel:e.getViewActivePanel(O),popout:$.active&&(0,G.jsx)(a.nl,{})}),(0,G.jsx)(a.G7,{id:"VIEW_MAIN",activePanel:"catalog",children:(0,G.jsx)(a.s_,{id:"catalog",children:(0,G.jsx)(be,{})})})]})]})}));o.render((0,G.jsx)(s.RouterContext.Provider,{value:M,children:(0,G.jsx)(a.iV,{scheme:z.vkUi,children:(0,G.jsx)(a.xb,{children:(0,G.jsx)(a.h7,{children:(0,G.jsx)(je,{})})})})}),document.getElementById("root"))},3306:function(e,t,n){n.d(t,{C:function(){return T}});var r=n(5861),o=n(885),a=n(4687),i=n.n(a),s=n(4928),c=n(719),u=n(5793),l=(n(846),n(8796)),p=n(5589),d=n.n(p),f=n(9989),g=n(8958);n(2229),(0,f.i)().storyImagesPrefix;function v(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d().send("VKWebAppGetAuthToken",{scope:t,app_id:g.Jf});case 2:return n=e.sent,console.info({resp:n}),e.abrupt("return",n.access_token);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=s.V5.model({stage:s.V5.optional(s.V5.integer,0),token:s.V5.optional(s.V5.string,""),avatar:s.V5.optional(s.V5.string,""),regDate:s.V5.optional(s.V5.model(),{years:s.V5.optional(s.V5.number,0),months:s.V5.optional(s.V5.number,0),days:s.V5.optional(s.V5.number,0)}),data:s.V5.array(s.V5.model({title:s.V5.optional(s.V5.string,""),description:s.V5.optional(s.V5.string,""),button:s.V5.optional(s.V5.string,""),underButton:s.V5.optional(s.V5.string,""),waiter:s.V5.optional(s.V5.string,""),isPopupActive:s.V5.optional(s.V5.boolean,!1),popupTitle:s.V5.optional(s.V5.string,""),popupDescription:s.V5.optional(s.V5.string,""),popupButton:s.V5.optional(s.V5.string,""),progress:s.V5.optional(s.V5.integer,0),isLine:s.V5.optional(s.V5.boolean,!1),isCircle:s.V5.optional(s.V5.boolean,!1),isLoaderActive:s.V5.optional(s.V5.boolean,!1),avatar:s.V5.optional(s.V5.string,""),productImage:s.V5.optional(s.V5.string,"")})),posts:s.V5.array(s.V5.model({text:s.V5.string,likes:s.V5.number}))}).views((function(e){return{get current(){return e.data[e.stage]},get isLoaderActive(){return e.current.isLoaderActive},get isLineActive(){return e.isLoaderActive&&e.current.isLine},get isCircleActive(){return e.isLoaderActive&&e.current.isCircle},get isPopupActive(){return e.current.isPopupActive},get getToken(){return e.token},get getAvatar(){return e.avatar},get getRegDate(){return{years:e.regDate.years,months:e.regDate.months,days:e.regDate.days}},get countLikes(){var t=0;return e.posts.forEach((function(e){return t+=e.likes})),t},get getMostFrequentWord(){var t="";e.posts.forEach((function(e){t+="".concat(e.text," ")}));var n=[];t.split(" ").forEach((function(e){return n.push(e.toLowerCase())}));for(var r={},o=0,a=n;o<a.length;o++){var i=a[o];void 0===r[i]?r[i]=1:r[i]++}for(var s=Object.keys(r)[0],c=r[Object.keys(r)[0]],u=1;u<Object.keys(r).length;u++)r[Object.keys(r)[u]]>c&&Object.keys(r)[u]&&(s=Object.keys(r)[u],c=r[Object.keys(r)[u]]);return s}}})).actions((function(e){return{joinGroup:function(){d().send("VKWebAppJoinGroup",{group_id:206574125}).then((function(e){e.result&&console.log("\u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043b\u0441\u044f \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e")})).catch((function(e){console.log(e)}))},toggleStory:function(){d().send("VKWebAppShowStoryBox",{background_type:"image",url:"https://sun9-19.userapi.com/impg/fqzOB3USwQOx9dLFhdYEyKXZZyuZzwMGrw9ZrQ/6JOkR8AQONo.jpg?size=746x1322&quality=96&sign=d1d5b31d3b9c1cbaca2d395cf9fbfde5"}),d().subscribe((function(t){if(t.detail)switch(t.detail.type){case"VKWebAppShowStoryBoxResult":case"VKWebAppShowStoryBoxFailed":e.increaseStage()}}))},fetchRegDate:function(){var t="/api/date?id="+g.xS;fetch(t).then((function(e){return e.json()})).then((function(t){e.setRegDate(t.comparedDate),console.log(e.getRegDate),console.log("xgwege")}))},setRegDate:function(t){e.regDate.years=t.years,e.regDate.months=t.months,e.regDate.days=t.days},sendBase64ToServer:function(e){(0,r.Z)(i().mark((function t(){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/img",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({image:e})});case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,console.log(r.message);case 7:case"end":return t.stop()}}),t)})))()},increaseStage:function(){e.stage+1<=e.data.length-1&&(e.stage=e.stage+1)},resetStages:function(){e.stage=2},toggleLoader:function(){e.current.isLoaderActive=!e.current.isLoaderActive},togglePopup:function(){e.current.isPopupActive=!e.current.isPopupActive},increaseLoaderProgress:function(){e.current.progress=e.current.progress+1},resetLoaderProgress:function(){e.data[2].progress=0},setToken:function(t){e.token=t,console.log(t)},pushPost:function(t,n){e.posts.push({text:t,likes:n})},setAvatar:function(t){e.avatar=t},fetchToken:function(){v("photos,wall").then((function(e){return m.setToken(e)}))},fetchWallData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;d().send("VKWebAppCallAPIMethod",{method:"wall.get",request_id:"wall",params:{v:"5.131",count:"".concat(t),access_token:e.getToken}}).then((function(t){console.log(t.response.items),t.response.items.forEach((function(t){return e.pushPost(t.text,t.likes.count)}))}))},fetchAvatar:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;d().send("VKWebAppCallAPIMethod",{method:"photos.get",request_id:"wall",params:{v:"5.131",count:"".concat(t),album_id:"profile",access_token:e.getToken}}).then((function(t){t.response.count&&e.setAvatar(t.response.items[0].sizes[4].url)}))}}})).create({data:[{title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441 \u043f\u0440\u0438\u0437\u044b\u0432\u043e\u043c",button:"\u041d\u0430\u0447\u0430\u0442\u044c",isCircle:!0,popupTitle:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043f\u043e\u043f\u0430\u043f\u0430!",popupDescription:"\u041d\u0443\u0436\u043d\u043e \u0432\u0430\u0448\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u043d\u0430 \u0442\u043e-\u0442\u043e \u0438 \u0442\u043e-\u0442\u043e",popupButton:"\u0414\u0430\u0442\u044c \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435"},{title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441 \u043f\u0440\u0438\u0437\u044b\u0432\u043e\u043c",button:"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"},{isLine:!0,isLoaderActive:!0},{avatar:c,description:"\u042f \u0442\u0430\u043a\u043e\u0439-\u0442\u043e \u043a\u043b\u0430\u0441\u0441\u043d\u044b\u0439"},{avatar:c,description:"\u042f \u0432 \u0432\u043a var0"},{avatar:c,description:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u0430\u0439\u043a\u043e\u0432 var1"},{avatar:c,description:"\u041b\u044e\u0431\u0438\u043c\u043e\u0435 \u0441\u043b\u043e\u0432\u043e var2"},{avatar:c,productImage:l,description:"\u041c\u043e\u0439 \u043f\u0440\u043e\u0434\u0443\u043a\u0442 \u043f\u043e\u043c\u0430\u0434\u0430",button:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"},{waiter:"\u041f\u043e\u0434\u043e\u0436\u0434\u0438"},{avatar:u,title:"\u041a\u043e\u043d\u043a\u0443\u0440\u0441 \u0443\u0440\u0430!!",description:"\u0431\u043b\u0430 \u0431\u043b\u0430 \u0431\u043b\u0430",button:"\u0423\u0447\u0430\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c",popupTitle:"\u041f\u043e\u0434\u043f\u0438\u0448\u0438\u0441\u044c \u043d\u0430 \u0433\u0440\u0443\u043f\u043f\u0443!",popupButton:"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e",isCircle:!0},{avatar:u,title:"\u041a\u043e\u043d\u043a\u0443\u0440\u0441 \u0443\u0440\u0430!!",description:"\u0431\u043b\u0430 \u0431\u043b\u0430 \u0431\u043b\u0430",button:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e",underButton:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430"}]});window.himera=m;var w=n(763),x=n(1160),y=n(5838),b=n(3267),V=n(2979),j=n(483),k=n(5874),S=n(3919),A=n(3168),P=n(7276),_=n(6210),I=(n(685),n(5263)),T=(0,A.Pi)((function(){var e=(0,P.useState)(!1),t=(0,o.Z)(e,2),n=t[0],r=t[1],a=(0,P.useState)(!1),i=(0,o.Z)(a,2),s=i[0],c=i[1],u=(0,P.useState)(!1),l=(0,o.Z)(u,2),p=l[0],d=l[1],f=(0,P.useState)(!1),g=(0,o.Z)(f,2),v=g[0],h=g[1],A=(0,P.useState)(!1),T=(0,o.Z)(A,2),N=T[0],L=T[1],E=(0,P.useState)(!1),C=(0,o.Z)(E,2),Z=C[0],R=C[1],O=(0,P.useState)(!1),W=(0,o.Z)(O,2),B=W[0],D=W[1],M=(0,P.useRef)(null),K=(0,P.useRef)(null),F=(0,P.useRef)(null),U=(0,P.useRef)(null),z=(0,P.useRef)(null),H=(0,P.useRef)(null),J=(0,P.useRef)(null);(0,P.useEffect)((function(){3===m.stage&&(J.current.currentTime=0)}),[m.stage]),(0,P.useEffect)((function(){F.current.addEventListener("ended",(function(e){c(!0),U.current.play()})),U.current.addEventListener("ended",(function(e){h(!0),z.current.play()})),z.current.addEventListener("ended",(function(e){m.increaseStage(),Q(),L(!1)})),U.current.pause(),z.current.pause(),setTimeout((function(){R(!0)}),1e4)}),[]);var G=m.getAvatar?m.getAvatar:w,q=function e(t){switch(m.stage){case 0:case 9:m.togglePopup();break;case 1:m.fetchAvatar(),s?(L(!0),d(!0)):(m.increaseStage(),Q());break;case 2:m.fetchWallData(),m.increaseStage(),e();break;case 7:t?(m.increaseStage(),e()):K.current.classList.add("fromLeft");break;case 8:setTimeout((function(){m.toggleStory()}),5e3);break;case 10:window.location.href="https://vk.com/public206574125";break;default:m.stage<7&&(3===m.stage&&r(!0),K.current.classList.add("fromLeft"),setTimeout((function(){K.current.classList.remove("fromLeft"),K.current.classList.add("toRight"),setTimeout((function(){m.increaseStage(),e()}),500)}),1500))}},Q=function(){for(var e=0;e<100;e++)setTimeout((function(){m.increaseLoaderProgress(),100===m.current.progress&&(q(),m.resetLoaderProgress())}),(t=20,n=50,(Math.random()*(n-t)+t)*e));var t,n};return(0,I.jsx)(_.s_,{children:(0,I.jsxs)("div",{className:"contentWrapper",children:[(0,I.jsxs)("div",{className:"videoWrapper",children:[(0,I.jsx)("div",{onClick:function(){m.togglePopup()},className:"darkBg ".concat(m.isPopupActive?"darkBgActive":"")}),(0,I.jsxs)("div",{className:"popup ".concat(m.isPopupActive?"popupActive":""),children:[(0,I.jsxs)("div",{className:"top",children:[(0,I.jsx)("h3",{children:(0,I.jsx)("b",{children:m.current.popupTitle})}),(0,I.jsx)("br",{}),m.current.popupDescription]}),(0,I.jsx)("div",{className:"bottom",children:(0,I.jsx)("div",{className:"buttonsWrapper",children:(0,I.jsx)("button",{onClick:function(){0===m.stage&&(D(!0),m.fetchToken(),m.fetchRegDate()),9===m.stage&&m.joinGroup(),m.togglePopup(),setTimeout(m.increaseStage,1e3)},className:"myButton",children:m.current.popupButton})})})]}),(0,I.jsx)("div",{className:"circleLoader ".concat(m.isCircleActive?"circleLoaderActive":""),children:(0,I.jsx)("svg",{version:"1.1",id:"L9",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",xmlSpace:"preserve",style:{width:"20%"},children:(0,I.jsx)("path",{fill:"#fff",d:"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50",children:(0,I.jsx)("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",dur:"0.5s",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})})})}),m.stage<=3&&(0,I.jsx)("video",{ref:F,autoPlay:!0,playsInline:!0,muted:!0,className:"myVideo",children:(0,I.jsx)("source",{src:b,type:"video/mp4"})}),(0,I.jsx)("video",{ref:U,autoPlay:!0,playsInline:!0,muted:!0,loop:!p,className:"myVideo veryFastTransition ".concat(s?"":"videoHidden"),children:Z&&(0,I.jsx)("source",{src:V,type:"video/mp4"})}),(0,I.jsx)("video",{ref:z,autoPlay:!0,playsInline:!0,muted:!0,className:"myVideo veryFastTransition ".concat(v?"":"videoHidden"),children:Z&&(0,I.jsx)("source",{src:j,type:"video/mp4"})}),(0,I.jsx)("video",{ref:H,autoPlay:!0,playsInline:!0,muted:!0,loop:!0,className:"myVideo ".concat(2===m.stage?"":"videoHidden"),children:B&&(0,I.jsx)("source",{src:k,type:"video/mp4"})}),m.stage>=2&&(0,I.jsx)("video",{ref:J,autoPlay:!0,playsInline:!0,muted:!0,loop:!0,className:"myVideo ".concat(n?"":"videoHidden"),children:(0,I.jsx)("source",{src:S,type:"video/mp4"})})]}),(0,I.jsxs)("div",{className:"himeraContent",children:[(0,I.jsxs)("div",{className:"himera",children:[m.current.waiter&&(0,I.jsx)("div",{className:"waiter",children:m.current.waiter}),(0,I.jsx)("div",{ref:K,className:"title ".concat(m.current.title&&!N?"":"hidden"),children:m.current.title}),(0,I.jsxs)("div",{ref:M,className:"avaWrapper ".concat(m.current.avatar?"":"hidden"),style:{position:"relative",width:308,height:308,borderRadius:"50%",overflow:"hidden"},children:[(0,I.jsx)("div",{style:{background:"url(".concat(G,") center center / cover")},className:"img"}),(0,I.jsx)("div",{style:{background:"url(".concat(G,") center center / cover"),mixBlendMode:"overlay",opacity:"0.8"},className:"img"}),(0,I.jsxs)("div",{className:"mask maskFromRight",children:[(0,I.jsx)("div",{style:{background:"url(".concat(G,") center center / cover")},className:"img"}),(0,I.jsx)("div",{style:{background:"#2ECFCD",mixBlendMode:"overlay"},className:"img"})]}),(0,I.jsxs)("div",{className:"mask maskFromLeft",children:[(0,I.jsx)("div",{style:{background:"url(".concat(G,") center center / cover")},className:"img"}),(0,I.jsx)("div",{style:{background:"#2ECFCD",mixBlendMode:"overlay"},className:"img"})]}),(0,I.jsx)("div",{className:"img",style:{background:"url(".concat(x,") center center / cover")}}),(0,I.jsx)("div",{className:"img",style:{background:"url(".concat(y,") center center / cover")}})]}),(0,I.jsxs)("div",{ref:K,className:"description ".concat(m.current.description?"":"hidden"," ").concat(m.current.productImage?"withImage":""),children:[(0,I.jsx)("div",{className:"productImageWrapper ".concat(m.current.productImage?"":"hidden"),children:(0,I.jsx)("img",{className:"productImage",alt:"productImage",src:m.current.productImage})}),function(e){for(var t=e.split(" "),n=0;n<t.length;n++)"var0"===t[n]&&(t[n]="".concat(m.getRegDate.years," \u043b\u0435\u0442, ").concat(m.getRegDate.months," \u043c\u0435\u0441\u044f\u0446\u0435\u0432, ").concat(m.getRegDate.days," \u0434\u043d\u0435\u0439")),"var1"===t[n]&&(t[n]=m.countLikes),"var2"===t[n]&&(t[n]=m.getMostFrequentWord);return t.join(" ")}(m.current.description)]}),(0,I.jsxs)("div",{className:"lineLoader ".concat(m.isLineActive?"lineLoaderActive":""),children:[(0,I.jsx)("div",{className:"title",children:"\u041b\u043e\u0434\u0435\u0440"}),(0,I.jsx)("div",{className:"line",children:(0,I.jsx)("div",{className:"filledLine",style:{width:"".concat(m.current.progress,"%")}})})]})]}),(0,I.jsx)("div",{className:"buttonsWrapper",children:(0,I.jsx)("button",{className:"myButton ".concat(m.current.button&&!N?"":"hidden"),onClick:q,children:m.current.button})})]})]})})}))},483:function(e,t,n){e.exports=n.p+"static/media/\u0412\u0438\u0434\u0435\u043e \u043a\u043e\u043d\u0435\u0446 \u043f\u043e\u0440\u0442\u0430\u043b\u0430 \u043f\u043e\u0441\u043b\u0435 \u043d\u0430\u0436\u0430\u0442\u0438\u044f \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c.53915db2e00737f490f2.mp4"},2979:function(e,t,n){e.exports=n.p+"static/media/\u0412\u0438\u0434\u0435\u043e \u043a\u043e\u043d\u0435\u0446 \u043f\u043e\u0440\u0442\u0430\u043b\u0430.aaf4a894deed19ae586a.mp4"},5874:function(e,t,n){e.exports=n.p+"static/media/\u0414\u041d\u041a - 1.db146ec4dbb80dcc025e.mp4"},3267:function(e,t,n){e.exports=n.p+"static/media/\u0414\u043e\u0440\u043e\u0433\u0430 \u0432 \u043f\u043e\u0440\u0442\u0430\u043b.25806539b5161d2dfc03.mp4"},3919:function(e,t,n){e.exports=n.p+"static/media/\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b.4f7e882d6a863832b0eb.mp4"},719:function(e,t,n){e.exports=n.p+"static/media/ava.c77e63e917529d4372f1.png"},5793:function(e,t,n){e.exports=n.p+"static/media/ava2.ae6698cae346dc33e0d5.png"},1160:function(e,t,n){e.exports=n.p+"static/media/gradient.e9de2d6d26a01d97fef8.png"},763:function(e,t,n){e.exports=n.p+"static/media/main.85c4ea9e16aff449a841.png"},8796:function(e,t,n){e.exports=n.p+"static/media/productImage.97c21931f2156dfa2726.png"},846:function(e,t,n){e.exports=n.p+"static/media/story.161508caf0231ae0000f.png"},5838:function(e,t,n){e.exports=n.p+"static/media/waves.60b6d3dcc9e73bd492df.png"}}]);